<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMI Calculator | FinCalc Pro</title>
    <meta name="description" content="Calculate your Equated Monthly Installments (EMI) for home loans, car loans, personal loans with detailed amortization schedule and charts.">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://fincalcpro.com/emi.html">
    <meta property="og:title" content="EMI Calculator | FinCalc Pro">
    <meta property="og:description" content="Calculate your Equated Monthly Installments (EMI) for home loans, car loans, personal loans with detailed amortization schedule and charts.">
    <meta property="og:image" content="https://fincalcpro.com/images/emi-calculator-og.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://fincalcpro.com/emi.html">
    <meta property="twitter:title" content="EMI Calculator | FinCalc Pro">
    <meta property="twitter:description" content="Calculate your Equated Monthly Installments (EMI) for home loans, car loans, personal loans with detailed amortization schedule and charts.">
    <meta property="twitter:image" content="https://fincalcpro.com/images/emi-calculator-og.jpg">

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
    /* Base Styles */
    :root {
        --primary: #5F6FF6;
        --primary-light: #8A96F8;
        --primary-dark: #4A5AE9;
        --secondary: #FF7E33;
        --secondary-light: #FF9A5C;
        --secondary-dark: #F26B1D;
        --success: #4DCA79;
        --success-light: #6EDB94;
        --error: #FF4D4D;
        --warning: #FFB84D;
        --text: #1A1D27;
        --text-light: #5A5E6B;
        --text-lighter: #8E92A3;
        --bg: #F8FAFF;
        --bg-dark: #E6E9F4;
        --card-bg: rgba(255, 255, 255, 0.85);
        --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.05);
        --border: rgba(0, 0, 0, 0.1);
        --border-radius: 12px;
        --border-radius-sm: 8px;
        --transition: all 0.3s ease;
    }

    [data-theme="dark"] {
        --text: #F0F2FF;
        --text-light: #B8BBD1;
        --text-lighter: #8E92A3;
        --bg: #12141D;
        --bg-dark: #1A1D27;
        --card-bg: rgba(26, 29, 39, 0.85);
        --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        --border: rgba(255, 255, 255, 0.1);
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    html {
        scroll-behavior: smooth;
    }

    body {
        font-family: 'Poppins', sans-serif;
        background-color: var(--bg);
        color: var(--text);
        line-height: 1.6;
        overflow-x: hidden;
    }

    body::before {
        content: '';
        position: fixed;
        top: -50%;
        left: -50%;
        right: -50%;
        bottom: -50%;
        background: linear-gradient(
            135deg, 
            rgba(95, 111, 246, 0.05) 0%, 
            rgba(255, 126, 51, 0.05) 50%, 
            rgba(77, 202, 121, 0.05) 100%
        );
        animation: gradientShift 15s ease infinite;
        z-index: -1;
    }

    @keyframes gradientShift {
        0% { transform: rotate(0deg); }
        50% { transform: rotate(180deg); }
        100% { transform: rotate(360deg); }
    }

    .container {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    }

    /* Header */
    .header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        padding: 1rem 0;
        background: var(--card-bg);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        z-index: 1000;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        transition: var(--transition);
    }

    .header.scrolled {
        padding: 0.75rem 0;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .header .container {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .logo {
        display: flex;
        align-items: center;
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--text);
        text-decoration: none;
    }

    .logo-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        background: var(--primary);
        color: white;
        border-radius: 8px;
        margin-right: 0.5rem;
        font-weight: 700;
        font-size: 0.9rem;
    }

    .logo-highlight {
        color: var(--primary);
    }

    .nav {
        display: flex;
        align-items: center;
        gap: 1.5rem;
    }

    .nav-menu {
        display: flex;
        list-style: none;
        gap: 0.5rem;
    }

    .nav-link {
        padding: 0.5rem 1rem;
        font-weight: 500;
        color: var(--text-light);
        border-radius: var(--border-radius-sm);
        transition: var(--transition);
        text-decoration: none;
    }

    .nav-link:hover, .nav-link.active {
        color: var(--primary);
        background: rgba(95, 111, 246, 0.1);
    }

    .nav-toggle {
        display: none;
        background: none;
        border: none;
        cursor: pointer;
        padding: 0.5rem;
    }

    .hamburger {
        display: block;
        width: 24px;
        height: 2px;
        background: var(--text);
        position: relative;
    }

    .hamburger::before,
    .hamburger::after {
        content: '';
        position: absolute;
        width: 24px;
        height: 2px;
        background: var(--text);
        left: 0;
        transition: var(--transition);
    }

    .hamburger::before {
        top: -6px;
    }

    .hamburger::after {
        top: 6px;
    }

    /* Theme Toggle Button */
    .theme-toggle {
        position: relative;
        width: 48px;
        height: 24px;
        border-radius: 50px;
        background: var(--bg-dark);
        border: none;
        cursor: pointer;
        padding: 0;
        transition: var(--transition);
        display: flex;
        align-items: center;
        justify-content: space-between;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .theme-icon {
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: var(--transition);
        position: absolute;
        top: 2px;
    }

    .theme-icon svg {
        width: 18px;
        height: 18px;
        fill: var(--text-light);
        transition: var(--transition);
    }

    .theme-icon.sun {
        left: 2px;
        opacity: 1;
    }

    .theme-icon.moon {
        right: 2px;
        opacity: 0;
    }

    [data-theme="dark"] .theme-toggle {
        background: var(--text-lighter);
    }

    [data-theme="dark"] .theme-icon.sun {
        opacity: 0;
        left: 26px;
    }

    [data-theme="dark"] .theme-icon.moon {
        opacity: 1;
        right: 26px;
    }

    [data-theme="dark"] .theme-icon svg {
        fill: var(--bg-dark);
    }

    .theme-toggle:hover {
        transform: scale(1.05);
    }

    .theme-toggle:active {
        transform: scale(0.95);
    }

    /* Theme transition */
    html.theme-transition,
    html.theme-transition *,
    html.theme-transition *:before,
    html.theme-transition *:after {
        transition: all 0.3s ease !important;
        transition-delay: 0 !important;
    }

    /* Main Content */
    .main {
        padding-top: 80px;
        min-height: 100vh;
    }

    .calculator-section {
        padding: 4rem 0;
    }

    .section-title {
        text-align: center;
        margin-bottom: 1rem;
        position: relative;
    }

    .section-title::after {
        content: '';
        display: block;
        width: 60px;
        height: 4px;
        background: linear-gradient(to right, var(--primary), var(--secondary));
        margin: 1rem auto;
        border-radius: 2px;
    }

    .section-subtitle {
        text-align: center;
        color: var(--text-light);
        max-width: 700px;
        margin: 0 auto 3rem;
    }

    /* Calculator Layout */
    .calculator-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
        margin-top: 2rem;
    }

    @media (max-width: 768px) {
        .calculator-container {
            grid-template-columns: 1fr;
        }
    }

    /* Calculator Form */
    .calculator-form {
        background: var(--card-bg);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border-radius: var(--border-radius);
        padding: 2rem;
        box-shadow: var(--card-shadow);
        border: 1px solid var(--border);
        transition: var(--transition);
    }

    .form-group {
        margin-bottom: 1.5rem;
    }

    .form-label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
        color: var(--text);
    }

    .form-control {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 1px solid var(--border);
        border-radius: var(--border-radius-sm);
        background: var(--bg-dark);
        color: var(--text);
        font-family: 'Poppins', sans-serif;
        font-size: 1rem;
        transition: var(--transition);
    }

    .form-control:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 2px rgba(95, 111, 246, 0.2);
    }

    .input-group {
        position: relative;
    }

    .input-group .currency {
        position: absolute;
        left: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: var(--text-light);
    }

    .input-group .form-control {
        padding-left: 3rem;
    }

    .input-group .percent {
        position: absolute;
        right: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: var(--text-light);
    }

    .range-slider {
        width: 100%;
        margin-top: 0.5rem;
    }

    .range-slider input[type="range"] {
        width: 100%;
        height: 6px;
        -webkit-appearance: none;
        background: var(--bg-dark);
        border-radius: 3px;
        outline: none;
    }

    .range-slider input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 18px;
        height: 18px;
        background: var(--primary);
        border-radius: 50%;
        cursor: pointer;
        transition: var(--transition);
    }

    .range-slider input[type="range"]::-webkit-slider-thumb:hover {
        transform: scale(1.1);
    }

    .loan-types {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 0.75rem;
        margin-top: 1rem;
    }

    .loan-type {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 1rem;
        background: var(--bg-dark);
        border-radius: var(--border-radius-sm);
        cursor: pointer;
        transition: var(--transition);
        border: 1px solid transparent;
    }

    .loan-type:hover {
        background: rgba(95, 111, 246, 0.1);
    }

    .loan-type.active {
        background: rgba(95, 111, 246, 0.1);
        border-color: var(--primary);
    }

    .loan-type-icon {
        width: 40px;
        height: 40px;
        background: var(--primary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 0.5rem;
    }

    .loan-type-icon svg {
        width: 20px;
        height: 20px;
        fill: white;
    }

    .loan-type-name {
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--text);
    }

    .form-actions {
        display: flex;
        gap: 1rem;
        margin-top: 2rem;
    }

    /* Buttons */
    .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 0.75rem 1.5rem;
        border-radius: var(--border-radius-sm);
        font-weight: 600;
        transition: var(--transition);
        border: none;
        cursor: pointer;
        position: relative;
        overflow: hidden;
    }

    .btn-primary {
        background: linear-gradient(135deg, var(--primary), var(--primary-light));
        color: white;
        box-shadow: 0 4px 12px rgba(95, 111, 246, 0.2);
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(95, 111, 246, 0.3);
    }

    .btn-secondary {
        background: var(--bg-dark);
        color: var(--text);
    }

    .btn-secondary:hover {
        background: var(--text-lighter);
        color: white;
    }

    .btn-outline {
        background: transparent;
        border: 2px solid var(--primary);
        color: var(--primary);
    }

    .btn-outline:hover {
        background: var(--primary);
        color: white;
    }

    .btn-large {
        padding: 1rem 2rem;
        font-size: 1.1rem;
    }

    /* Results Section */
    .results-container {
        background: var(--card-bg);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border-radius: var(--border-radius);
        padding: 2rem;
        box-shadow: var(--card-shadow);
        border: 1px solid var(--border);
        transition: var(--transition);
    }

    .results-summary {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .result-card {
        background: var(--bg-dark);
        border-radius: var(--border-radius-sm);
        padding: 1.5rem;
        text-align: center;
    }

    .result-value {
        font-size: 1.75rem;
        font-weight: 700;
        color: var(--primary);
        margin-bottom: 0.25rem;
    }

    .result-label {
        font-size: 0.875rem;
        color: var(--text-light);
    }

    .charts-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    @media (max-width: 768px) {
        .charts-container {
            grid-template-columns: 1fr;
        }
    }

    .chart-card {
        background: var(--bg-dark);
        border-radius: var(--border-radius-sm);
        padding: 1.5rem;
    }

    .chart-title {
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 1rem;
        text-align: center;
        color: var(--text);
    }

    .chart-container {
        position: relative;
        height: 250px;
    }

    .amortization-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 1.5rem;
    }

    .amortization-table th {
        background: var(--bg-dark);
        padding: 0.75rem;
        text-align: left;
        font-weight: 600;
        font-size: 0.875rem;
        color: var(--text-light);
    }

    .amortization-table td {
        padding: 0.75rem;
        border-bottom: 1px solid var(--border);
        font-size: 0.875rem;
    }

    .amortization-table tr:last-child td {
        border-bottom: none;
    }

    .table-container {
        max-height: 300px;
        overflow-y: auto;
        margin-top: 1.5rem;
        border-radius: var(--border-radius-sm);
        border: 1px solid var(--border);
    }

    .table-container::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }

    .table-container::-webkit-scrollbar-track {
        background: var(--bg-dark);
    }

    .table-container::-webkit-scrollbar-thumb {
        background: var(--primary);
        border-radius: 3px;
    }

    .table-actions {
        display: flex;
        justify-content: space-between;
        margin-top: 1rem;
    }

    .download-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--primary);
        font-weight: 500;
        cursor: pointer;
        transition: var(--transition);
        text-decoration: none;
    }

    .download-btn:hover {
        color: var(--primary-dark);
    }

    .download-btn svg {
        width: 16px;
        height: 16px;
        fill: var(--primary);
    }

    /* Footer Styles */
    .footer {
        background: var(--bg-dark);
        padding: 4rem 0 0;
        color: var(--text-light);
    }

    .footer-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 3rem;
        margin-bottom: 3rem;
    }

    .footer-about {
        max-width: 300px;
    }

    .footer-title {
        color: white;
        font-size: 1.25rem;
        margin-bottom: 1.5rem;
        position: relative;
    }

    .footer-title::after {
        content: '';
        display: block;
        width: 40px;
        height: 3px;
        background: linear-gradient(to right, var(--primary), var(--secondary));
        margin-top: 0.5rem;
        border-radius: 2px;
    }

    .footer-about-text {
        margin-bottom: 1.5rem;
    }

    .footer-social {
        display: flex;
        gap: 1rem;
    }

    .social-link {
        width: 40px;
        height: 40px;
        background: var(--text-lighter);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: var(--transition);
        text-decoration: none;
    }

    .social-link:hover {
        background: var(--primary);
        transform: translateY(-2px);
    }

    .social-link svg {
        width: 20px;
        height: 20px;
        fill: white;
    }

    .footer-menu {
        list-style: none;
    }

    .footer-link {
        display: block;
        padding: 0.5rem 0;
        color: var(--text-light);
        transition: var(--transition);
        text-decoration: none;
    }

    .footer-link:hover {
        color: white;
        transform: translateX(5px);
    }

    .footer-bottom {
        border-top: 1px solid var(--border);
        padding: 1.5rem 0;
        text-align: center;
    }

    .copyright, .creator {
        font-size: 0.875rem;
        color: var(--text-lighter);
    }

    .creator {
        margin-top: 0.5rem;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .nav-menu {
            position: fixed;
            top: 80px;
            left: 0;
            width: 100%;
            background: var(--card-bg);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            flex-direction: column;
            padding: 1rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            transform: translateY(-150%);
            transition: var(--transition);
            z-index: 999;
        }
        
        .nav-menu.active {
            transform: translateY(0);
        }
        
        .nav-link {
            display: block;
            padding: 1rem;
        }
        
        .nav-toggle {
            display: block;
        }
        
        .nav-toggle.active .hamburger {
            background: transparent;
        }
        
        .nav-toggle.active .hamburger::before {
            transform: rotate(45deg);
            top: 0;
        }
        
        .nav-toggle.active .hamburger::after {
            transform: rotate(-45deg);
            top: 0;
        }
    }

    @media (max-width: 480px) {
        .form-actions {
            flex-direction: column;
        }
        
        .btn {
            width: 100%;
        }
        
        .results-summary {
            grid-template-columns: 1fr;
        }
        
        .footer-grid {
            grid-template-columns: 1fr;
            gap: 2rem;
        }
    }

    /* Animations */
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    @keyframes fadeInUp {
        from { 
            opacity: 0;
            transform: translateY(20px);
        }
        to { 
            opacity: 1;
            transform: translateY(0);
        }
    }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <a href="/" class="logo">
                <span class="logo-icon">Rs</span>
                <span>FinCalc<span class="logo-highlight">Pro</span></span>
            </a>
            
            <nav class="nav">
                <ul class="nav-menu">
                    <li><a href="emi.html" class="nav-link active">EMI Calculator</a></li>
                    <li><a href="sip.html" class="nav-link">SIP Calculator</a></li>
                    <li><a href="vat.html" class="nav-link">VAT Calculator</a></li>
                    <li><a href="percentage.html" class="nav-link">Percentage Tool</a></li>
                    <li><a href="/all-calculators" class="nav-link">All Tools</a></li>
                </ul>
                
                <button class="theme-toggle" aria-label="Toggle theme">
                    <span class="theme-icon sun">
                        <svg viewBox="0 0 24 24">
                            <path d="M12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18M20,15.31L23.31,12L20,8.69V4H15.31L12,0.69L8.69,4H4V8.69L0.69,12L4,15.31V20H8.69L12,23.31L15.31,20H20V15.31Z"/>
                        </svg>
                    </span>
                    <span class="theme-icon moon">
                        <svg viewBox="0 0 24 24">
                            <path d="M12,18A6,6 0 0,1 6,12C6,8.68 8.69,6 12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8M12,3L9.66,5.34L12,7.68L14.34,5.34L12,3M5.34,9.66L3,12L5.34,14.34L7.68,12L5.34,9.66M18.66,9.66L16.32,12L18.66,14.34L21,12L18.66,9.66M12,16.32L9.66,18.66L12,21L14.34,18.66L12,16.32M19,15V18H16V20H19V23H21V20H24V18H21V15H19Z"/>
                        </svg>
                    </span>
                </button>
                
                <button class="nav-toggle" aria-label="Menu">
                    <span class="hamburger"></span>
                </button>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <section class="calculator-section">
            <div class="container">
                <h1 class="section-title">EMI Calculator</h1>
                <p class="section-subtitle">Calculate your Equated Monthly Installments for loans and mortgages</p>
                
                <div class="calculator-container">
                    <!-- Calculator Form -->
                    <div class="calculator-form">
                        <div class="form-group">
                            <label for="loanType" class="form-label">Loan Type</label>
                            <div class="loan-types">
                                <div class="loan-type active" data-type="home">
                                    <div class="loan-type-icon">
                                        <svg viewBox="0 0 24 24">
                                            <path d="M12,3L2,12H5V20H19V12H22L12,3M12,7.7L14,9.7V17H10V9.7L12,7.7Z"/>
                                        </svg>
                                    </div>
                                    <span class="loan-type-name">Home Loan</span>
                                </div>
                                <div class="loan-type" data-type="car">
                                    <div class="loan-type-icon">
                                        <svg viewBox="0 0 24 24">
                                            <path d="M5,11L6.5,6.5H17.5L19,11M17.5,16A1.5,1.5 0 0,1 16,14.5A1.5,1.5 0 0,1 17.5,13A1.5,1.5 0 0,1 19,14.5A1.5,1.5 0 0,1 17.5,16M6.5,16A1.5,1.5 0 0,1 5,14.5A1.5,1.5 0 0,1 6.5,13A1.5,1.5 0 0,1 8,14.5A1.5,1.5 0 0,1 6.5,16M18.92,6C18.72,5.42 18.16,5 17.5,5H6.5C5.84,5 5.28,5.42 5.08,6L3,12V20A1,1 0 0,0 4,21H5A1,1 0 0,0 6,20V19H18V20A1,1 0 0,0 19,21H20A1,1 0 0,0 21,20V12L18.92,6Z"/>
                                        </svg>
                                    </div>
                                    <span class="loan-type-name">Car Loan</span>
                                </div>
                                <div class="loan-type" data-type="personal">
                                    <div class="loan-type-icon">
                                        <svg viewBox="0 0 24 24">
                                            <path d="M12,3A4,4 0 0,0 8,7V13H6V15H9V21H11V15H13V21H15V15H18V13H16V7A4,4 0 0,0 12,3Z"/>
                                        </svg>
                                    </div>
                                    <span class="loan-type-name">Personal Loan</span>
                                </div>
                                <div class="loan-type" data-type="education">
                                    <div class="loan-type-icon">
                                        <svg viewBox="0 0 24 24">
                                            <path d="M12,3L1,9L12,15L21,10.09V17H23V9M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18Z"/>
                                        </svg>
                                    </div>
                                    <span class="loan-type-name">Education Loan</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="loanAmount" class="form-label">Loan Amount (Rs)</label>
                            <div class="input-group">
                                <span class="currency">Rs</span>
                                <input type="number" id="loanAmount" class="form-control" placeholder="100,000" min="1000" max="100000000" value="1000000">
                            </div>
                            <div class="range-slider">
                                <input type="range" id="loanAmountRange" min="1000" max="10000000" step="1000" value="1000000">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="interestRate" class="form-label">Interest Rate (% p.a.)</label>
                            <div class="input-group">
                                <input type="number" id="interestRate" class="form-control" placeholder="8.5" min="1" max="30" step="0.01" value="8.5">
                                <span class="percent">%</span>
                            </div>
                            <div class="range-slider">
                                <input type="range" id="interestRateRange" min="1" max="30" step="0.1" value="8.5">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="loanTenure" class="form-label">Loan Tenure (Years)</label>
                            <div class="input-group">
                                <input type="number" id="loanTenure" class="form-control" placeholder="5" min="1" max="30" value="5">
                                <span class="percent">Yrs</span>
                            </div>
                            <div class="range-slider">
                                <input type="range" id="loanTenureRange" min="1" max="30" value="5">
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button id="calculateBtn" class="btn btn-primary">Calculate EMI</button>
                            <button id="resetBtn" class="btn btn-secondary">Reset</button>
                        </div>
                    </div>
                    
                    <!-- Results Section -->
                    <div class="results-container">
                        <div class="results-summary">
                            <div class="result-card">
                                <div class="result-value" id="emiAmount">Rs 0</div>
                                <div class="result-label">Monthly Payment</div>
                            </div>
                            <div class="result-card">
                                <div class="result-value" id="totalInterest">Rs 0</div>
                                <div class="result-label">Total Interest</div>
                            </div>
                            <div class="result-card">
                                <div class="result-value" id="totalPayment">Rs 0</div>
                                <div class="result-label">Total Payment</div>
                            </div>
                        </div>
                        
                        <div class="charts-container">
                            <div class="chart-card">
                                <h3 class="chart-title">Payment Breakdown</h3>
                                <div class="chart-container">
                                    <canvas id="pieChart"></canvas>
                                </div>
                            </div>
                            <div class="chart-card">
                                <h3 class="chart-title">Interest vs Principal</h3>
                                <div class="chart-container">
                                    <canvas id="barChart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <h3 class="chart-title">Amortization Schedule</h3>
                        <div class="table-container">
                            <table class="amortization-table" id="amortizationTable">
                                <thead>
                                    <tr>
                                        <th>Month</th>
                                        <th>Payment</th>
                                        <th>Principal</th>
                                        <th>Interest</th>
                                        <th>Balance</th>
                                    </tr>
                                </thead>
                                <tbody id="amortizationBody">
                                    <!-- Will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="table-actions">
                            <div class="download-btn" id="downloadCSV">
                                <svg viewBox="0 0 24 24">
                                    <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"/>
                                </svg>
                                Download as CSV
                            </div>
                            <div class="download-btn" id="printSchedule">
                                <svg viewBox="0 0 24 24">
                                    <path d="M18,3H6V7H18M19,12A1,1 0 0,1 18,11A1,1 0 0,1 19,10A1,1 0 0,1 20,11A1,1 0 0,1 19,12M16,19H8V14H16M19,8H5A3,3 0 0,0 2,11V17H6V21H18V17H22V11A3,3 0 0,0 19,8Z"/>
                                </svg>
                                Print Schedule
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-about">
                    <a href="/" class="logo">
                        <span class="logo-icon">Rs</span>
                        <span>FinCalc<span class="logo-highlight">Pro</span></span>
                    </a>
                    <p class="footer-about-text">Providing accurate financial calculation tools to help you make better money decisions.</p>
                    <div class="footer-social">
                        <a href="#" class="social-link" aria-label="Facebook">
                            <svg viewBox="0 0 24 24"><path d="M12 2.04C6.5 2.04 2 6.53 2 12.06C2 17.06 5.66 21.21 10.44 21.96V14.96H7.9V12.06H10.44V9.85C10.44 7.34 11.93 5.96 14.22 5.96C15.31 5.96 16.45 6.15 16.45 6.15V8.62H15.19C13.95 8.62 13.56 9.39 13.56 10.18V12.06H16.34L15.89 14.96H13.56V21.96A10 10 0 0 0 22 12.06C22 6.53 17.5 2.04 12 2.04Z"/></svg>
                        </a>
                        <a href="#" class="social-link" aria-label="Twitter">
                            <svg viewBox="0 0 24 24"><path d="M22.46 6C21.69 6.35 20.86 6.58 20 6.69C20.88 6.16 21.56 5.32 21.88 4.31C21.05 4.81 20.13 5.16 19.16 5.36C18.37 4.5 17.26 4 16 4C13.65 4 11.73 5.92 11.73 8.29C11.73 8.63 11.77 8.96 11.84 9.27C8.28 9.09 5.11 7.38 3 4.79C2.63 5.42 2.42 6.16 2.42 6.94C2.42 8.43 3.17 9.75 4.33 10.5C3.62 10.5 2.96 10.3 2.38 10C2.38 10 2.38 10 2.38 10.03C2.38 12.11 3.86 13.85 5.82 14.24C5.46 14.34 5.08 14.39 4.69 14.39C4.42 14.39 4.15 14.36 3.89 14.31C4.43 16 6 17.26 7.89 17.29C6.43 18.45 4.58 19.13 2.56 19.13C2.22 19.13 1.88 19.11 1.54 19.07C3.44 20.29 5.7 21 8.12 21C16 21 20.33 14.46 20.33 8.79C20.33 8.6 20.33 8.42 20.32 8.23C21.16 7.63 21.88 6.87 22.46 6Z"/></svg>
                        </a>
                        <a href="#" class="social-link" aria-label="LinkedIn">
                            <svg viewBox="0 0 24 24"><path d="M19 3A2 2 0 0 1 21 5V19A2 2 0 0 1 19 21H5A2 2 0 0 1 3 19V5A2 2 0 0 1 5 3H19M18.5 18.5V13.2A3.26 3.26 0 0 0 15.24 9.94C14.39 9.94 13.4 10.46 12.92 11.24V10.13H10.13V18.5H12.92V13.57C12.92 12.8 13.54 12.17 14.31 12.17A1.4 1.4 0 0 1 15.71 13.57V18.5H18.5M6.88 8.56A1.68 1.68 0 0 0 8.56 6.88C8.56 5.95 7.81 5.19 6.88 5.19A1.69 1.69 0 0 0 5.19 6.88C5.19 7.81 5.95 8.56 6.88 8.56M8.27 18.5V10.13H5.5V18.5H8.27Z"/></svg>
                        </a>
                    </div>
                </div>
                
                <div class="footer-links">
                    <h3 class="footer-title">Calculators</h3>
                    <ul class="footer-menu">
                        <li><a href="emi.html" class="footer-link">EMI Calculator</a></li>
                        <li><a href="/sip-calculator" class="footer-link">SIP Calculator</a></li>
                        <li><a href="/vat-calculator" class="footer-link">VAT Calculator</a></li>
                        <li><a href="/percentage-calculator" class="footer-link">Percentage Tool</a></li>
                        <li><a href="/loan-calculator" class="footer-link">Loan Calculator</a></li>
                        <li><a href="/interest-calculator" class="footer-link">Interest Calculator</a></li>
                    </ul>
                </div>
                
                <div class="footer-links">
                    <h3 class="footer-title">Company</h3>
                    <ul class="footer-menu">
                        <li><a href="/about" class="footer-link">About Us</a></li>
                        <li><a href="/blog" class="footer-link">Blog</a></li>
                        <li><a href="/careers" class="footer-link">Careers</a></li>
                        <li><a href="/press" class="footer-link">Press</a></li>
                        <li><a href="/contact" class="footer-link">Contact Us</a></li>
                    </ul>
                </div>
                
                <div class="footer-links">
                    <h3 class="footer-title">Legal</h3>
                    <ul class="footer-menu">
                        <li><a href="/privacy" class="footer-link">Privacy Policy</a></li>
                        <li><a href="/terms" class="footer-link">Terms of Service</a></li>
                        <li><a href="/cookies" class="footer-link">Cookie Policy</a></li>
                        <li><a href="/disclaimer" class="footer-link">Disclaimer</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p class="copyright">&copy; 2023 FinCalc Pro. All rights reserved.</p>
                <p class="creator">Created with ❤️ by Siddha Batala, Kailali, Nepal</p>
            </div>
        </div>
    </footer>

    <script>
    // DOM Elements
    const navToggle = document.querySelector('.nav-toggle');
    const navMenu = document.querySelector('.nav-menu');
    const themeToggle = document.querySelector('.theme-toggle');
    const loanTypes = document.querySelectorAll('.loan-type');
    const loanAmount = document.getElementById('loanAmount');
    const loanAmountRange = document.getElementById('loanAmountRange');
    const interestRate = document.getElementById('interestRate');
    const interestRateRange = document.getElementById('interestRateRange');
    const loanTenure = document.getElementById('loanTenure');
    const loanTenureRange = document.getElementById('loanTenureRange');
    const calculateBtn = document.getElementById('calculateBtn');
    const resetBtn = document.getElementById('resetBtn');
    const emiAmount = document.getElementById('emiAmount');
    const totalInterest = document.getElementById('totalInterest');
    const totalPayment = document.getElementById('totalPayment');
    const amortizationBody = document.getElementById('amortizationBody');
    const downloadCSV = document.getElementById('downloadCSV');
    const printSchedule = document.getElementById('printSchedule');
    
    // Chart variables
    let pieChart, barChart;
    
    // Format currency
    function formatCurrency(amount) {
        return new Intl.NumberFormat('en-IN', {
            style: 'currency',
            currency: 'INR',
            minimumFractionDigits: 0,
            maximumFractionDigits: 0
        }).format(amount).replace('₹', 'Rs ');
    }
    
    // Calculate EMI
    function calculateEMI(principal, rate, years) {
        const monthlyRate = rate / 12 / 100;
        const months = years * 12;
        
        // EMI formula: [P x R x (1+R)^N]/[(1+R)^N-1]
        const emi = principal * monthlyRate * Math.pow(1 + monthlyRate, months) / (Math.pow(1 + monthlyRate, months) - 1);
        
        return emi;
    }
    
    // Generate amortization schedule
    function generateAmortizationSchedule(principal, rate, years, emi) {
        const monthlyRate = rate / 12 / 100;
        const months = years * 12;
        let balance = principal;
        const schedule = [];
        let totalInterest = 0;
        
        for (let i = 1; i <= months; i++) {
            const interest = balance * monthlyRate;
            const principalPayment = emi - interest;
            totalInterest += interest;
            
            schedule.push({
                month: i,
                payment: emi,
                principal: principalPayment,
                interest: interest,
                balance: balance - principalPayment
            });
            
            balance -= principalPayment;
        }
        
        return {
            schedule: schedule,
            totalInterest: totalInterest
        };
    }
    
    // Update charts
    function updateCharts(principal, totalInterestPaid) {
        // Pie Chart - Payment Breakdown
        if (pieChart) {
            pieChart.destroy();
        }
        
        const pieCtx = document.getElementById('pieChart').getContext('2d');
        pieChart = new Chart(pieCtx, {
            type: 'pie',
            data: {
                labels: ['Principal', 'Interest'],
                datasets: [{
                    data: [principal, totalInterestPaid],
                    backgroundColor: [
                        'rgba(95, 111, 246, 0.8)',
                        'rgba(255, 126, 51, 0.8)'
                    ],
                    borderColor: [
                        'rgba(95, 111, 246, 1)',
                        'rgba(255, 126, 51, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            color: getComputedStyle(document.documentElement).getPropertyValue('--text')
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                label += formatCurrency(context.raw);
                                return label;
                            }
                        }
                    }
                }
            }
        });
        
        // Bar Chart - Yearly Interest vs Principal
        if (barChart) {
            barChart.destroy();
        }
        
        const barCtx = document.getElementById('barChart').getContext('2d');
        barChart = new Chart(barCtx, {
            type: 'bar',
            data: {
                labels: Array.from({length: parseInt(loanTenure.value)}, (_, i) => `Year ${i + 1}`),
                datasets: [
                    {
                        label: 'Principal',
                        data: [],
                        backgroundColor: 'rgba(95, 111, 246, 0.8)',
                        borderColor: 'rgba(95, 111, 246, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Interest',
                        data: [],
                        backgroundColor: 'rgba(255, 126, 51, 0.8)',
                        borderColor: 'rgba(255, 126, 51, 1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        stacked: true,
                        grid: {
                            display: false
                        },
                        ticks: {
                            color: getComputedStyle(document.documentElement).getPropertyValue('--text-light')
                        }
                    },
                    y: {
                        stacked: true,
                        ticks: {
                            color: getComputedStyle(document.documentElement).getPropertyValue('--text-light'),
                            callback: function(value) {
                                return formatCurrency(value);
                            }
                        },
                        grid: {
                            color: getComputedStyle(document.documentElement).getPropertyValue('--border')
                        }
                    }
                },
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            color: getComputedStyle(document.documentElement).getPropertyValue('--text')
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                label += formatCurrency(context.raw);
                                return label;
                            }
                        }
                    }
                }
            }
        });
    }
    
    // Update yearly data for bar chart
    function updateYearlyData(schedule) {
        const yearlyPrincipal = [];
        const yearlyInterest = [];
        const years = parseInt(loanTenure.value);
        
        for (let year = 0; year < years; year++) {
            let principalSum = 0;
            let interestSum = 0;
            
            for (let month = 0; month < 12; month++) {
                const index = year * 12 + month;
                if (index < schedule.length) {
                    principalSum += schedule[index].principal;
                    interestSum += schedule[index].interest;
                }
            }
            
            yearlyPrincipal.push(principalSum);
            yearlyInterest.push(interestSum);
        }
        
        barChart.data.datasets[0].data = yearlyPrincipal;
        barChart.data.datasets[1].data = yearlyInterest;
        barChart.update();
    }
    
    // Update results
    function updateResults() {
        const principal = parseFloat(loanAmount.value);
        const rate = parseFloat(interestRate.value);
        const years = parseInt(loanTenure.value);
        
        if (isNaN(principal) || isNaN(rate) || isNaN(years) || principal <= 0 || rate <= 0 || years <= 0) {
            alert('Please enter valid values for all fields');
            return;
        }
        
        const emi = calculateEMI(principal, rate, years);
        const { schedule, totalInterest: totalInterestPaid } = generateAmortizationSchedule(principal, rate, years, emi);
        const totalPaymentAmount = principal + totalInterestPaid;
        
        // Update summary
        emiAmount.textContent = formatCurrency(emi);
        totalInterest.textContent = formatCurrency(totalInterestPaid);
        totalPayment.textContent = formatCurrency(totalPaymentAmount);
        
        // Update charts
        updateCharts(principal, totalInterestPaid);
        updateYearlyData(schedule);
        
        // Update amortization table
        amortizationBody.innerHTML = '';
        schedule.forEach((payment, index) => {
            if (index < 12 || index === schedule.length - 1) { // Show first year and last payment
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${payment.month}</td>
                    <td>${formatCurrency(payment.payment)}</td>
                    <td>${formatCurrency(payment.principal)}</td>
                    <td>${formatCurrency(payment.interest)}</td>
                    <td>${formatCurrency(payment.balance)}</td>
                `;
                amortizationBody.appendChild(row);
            } else if (index === 12) { // Add ellipsis row
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td colspan="5" style="text-align: center; color: var(--text-light);">...</td>
                `;
                amortizationBody.appendChild(row);
            }
        });
    }
    
    // Download CSV
    function downloadAmortizationCSV() {
        const principal = parseFloat(loanAmount.value);
        const rate = parseFloat(interestRate.value);
        const years = parseInt(loanTenure.value);
        
        if (isNaN(principal)) return;
        
        const emi = calculateEMI(principal, rate, years);
        const { schedule } = generateAmortizationSchedule(principal, rate, years, emi);
        
        let csv = 'Month,Payment,Principal,Interest,Balance\n';
        
        schedule.forEach(payment => {
            csv += `${payment.month},${payment.payment.toFixed(2)},${payment.principal.toFixed(2)},${payment.interest.toFixed(2)},${payment.balance.toFixed(2)}\n`;
        });
        
        const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.setAttribute('href', url);
        link.setAttribute('download', `EMI_Schedule_${principal}_${rate}_${years}.csv`);
        link.style.visibility = 'hidden';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }
    
    // Print schedule
    function printAmortizationSchedule() {
        const principal = parseFloat(loanAmount.value);
        const rate = parseFloat(interestRate.value);
        const years = parseInt(loanTenure.value);
        
        if (isNaN(principal)) return;
        
        const emi = calculateEMI(principal, rate, years);
        const { schedule } = generateAmortizationSchedule(principal, rate, years, emi);
        
        let printContent = `
            <html>
                <head>
                    <title>EMI Schedule - Rs ${principal.toLocaleString()} at ${rate}% for ${years} years</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        h1 { color: #5F6FF6; text-align: center; }
                        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                        th { background: #f5f5f5; padding: 10px; text-align: left; }
                        td { padding: 10px; border-bottom: 1px solid #ddd; }
                        .summary { display: flex; justify-content: space-between; margin-bottom: 20px; }
                        .summary-item { background: #f9f9f9; padding: 15px; border-radius: 5px; width: 30%; }
                        .summary-value { font-size: 1.2em; font-weight: bold; color: #5F6FF6; }
                        @page { size: auto; margin: 10mm; }
                    </style>
                </head>
                <body>
                    <h1>EMI Payment Schedule</h1>
                    <div class="summary">
                        <div class="summary-item">
                            <div>Loan Amount</div>
                            <div class="summary-value">Rs ${principal.toLocaleString()}</div>
                        </div>
                        <div class="summary-item">
                            <div>Interest Rate</div>
                            <div class="summary-value">${rate}% p.a.</div>
                        </div>
                        <div class="summary-item">
                            <div>Loan Tenure</div>
                            <div class="summary-value">${years} years</div>
                        </div>
                    </div>
                    <div class="summary">
                        <div class="summary-item">
                            <div>Monthly EMI</div>
                            <div class="summary-value">Rs ${emi.toFixed(2)}</div>
                        </div>
                        <div class="summary-item">
                            <div>Total Interest</div>
                            <div class="summary-value">Rs ${(emi * years * 12 - principal).toFixed(2)}</div>
                        </div>
                        <div class="summary-item">
                            <div>Total Payment</div>
                            <div class="summary-value">Rs ${(emi * years * 12).toFixed(2)}</div>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Month</th>
                                <th>Payment (Rs)</th>
                                <th>Principal (Rs)</th>
                                <th>Interest (Rs)</th>
                                <th>Balance (Rs)</th>
                            </tr>
                        </thead>
                        <tbody>
        `;
        
        schedule.forEach(payment => {
            printContent += `
                <tr>
                    <td>${payment.month}</td>
                    <td>${payment.payment.toFixed(2)}</td>
                    <td>${payment.principal.toFixed(2)}</td>
                    <td>${payment.interest.toFixed(2)}</td>
                    <td>${payment.balance.toFixed(2)}</td>
                </tr>
            `;
        });
        
        printContent += `
                        </tbody>
                    </table>
                    <p style="text-align: center; margin-top: 20px; color: #666;">
                        Generated by FinCalc Pro - https://fincalcpro.com
                    </p>
                </body>
            </html>
        `;
        
        const printWindow = window.open('', '_blank');
        printWindow.document.write(printContent);
        printWindow.document.close();
        printWindow.focus();
        setTimeout(() => {
            printWindow.print();
            printWindow.close();
        }, 500);
    }
    
    // Reset form
    function resetForm() {
        loanAmount.value = 1000000;
        loanAmountRange.value = 1000000;
        interestRate.value = 8.5;
        interestRateRange.value = 8.5;
        loanTenure.value = 5;
        loanTenureRange.value = 5;
        
        // Reset results
        emiAmount.textContent = 'Rs 0';
        totalInterest.textContent = 'Rs 0';
        totalPayment.textContent = 'Rs 0';
        amortizationBody.innerHTML = '';
        
        // Reset charts
        if (pieChart) {
            pieChart.destroy();
        }
        if (barChart) {
            barChart.destroy();
        }
        
        // Set home loan as active
        loanTypes.forEach(type => {
            type.classList.remove('active');
            if (type.dataset.type === 'home') {
                type.classList.add('active');
            }
        });
    }
    
    // Event Listeners
    loanTypes.forEach(type => {
        type.addEventListener('click', () => {
            loanTypes.forEach(t => t.classList.remove('active'));
            type.classList.add('active');
            
            // Set default values based on loan type
            switch(type.dataset.type) {
                case 'home':
                    interestRate.value = 8.5;
                    interestRateRange.value = 8.5;
                    loanTenure.value = 20;
                    loanTenureRange.value = 20;
                    break;
                case 'car':
                    interestRate.value = 9.5;
                    interestRateRange.value = 9.5;
                    loanTenure.value = 5;
                    loanTenureRange.value = 5;
                    break;
                case 'personal':
                    interestRate.value = 12;
                    interestRateRange.value = 12;
                    loanTenure.value = 3;
                    loanTenureRange.value = 3;
                    break;
                case 'education':
                    interestRate.value = 10;
                    interestRateRange.value = 10;
                    loanTenure.value = 10;
                    loanTenureRange.value = 10;
                    break;
            }
        });
    });
    
    // Sync range sliders with input fields
    loanAmount.addEventListener('input', () => {
        loanAmountRange.value = loanAmount.value;
    });
    
    loanAmountRange.addEventListener('input', () => {
        loanAmount.value = loanAmountRange.value;
    });
    
    interestRate.addEventListener('input', () => {
        interestRateRange.value = interestRate.value;
    });
    
    interestRateRange.addEventListener('input', () => {
        interestRate.value = interestRateRange.value;
    });
    
    loanTenure.addEventListener('input', () => {
        loanTenureRange.value = loanTenure.value;
    });
    
    loanTenureRange.addEventListener('input', () => {
        loanTenure.value = loanTenureRange.value;
    });
    
    calculateBtn.addEventListener('click', updateResults);
    resetBtn.addEventListener('click', resetForm);
    downloadCSV.addEventListener('click', downloadAmortizationCSV);
    printSchedule.addEventListener('click', printAmortizationSchedule);
    
    // Theme Switcher
    function setTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
        localStorage.setItem('theme', theme);
        
        if (theme === 'dark') {
            themeToggle.setAttribute('aria-label', 'Switch to light mode');
        } else {
            themeToggle.setAttribute('aria-label', 'Switch to dark mode');
        }
    }
    
    function toggleTheme() {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        setTheme(newTheme);
        
        document.documentElement.classList.add('theme-transition');
        setTimeout(() => {
            document.documentElement.classList.remove('theme-transition');
        }, 300);
    }
    
    function initTheme() {
        const savedTheme = localStorage.getItem('theme');
        const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        
        if (savedTheme) {
            setTheme(savedTheme);
        } else if (systemPrefersDark) {
            setTheme('dark');
        } else {
            setTheme('light');
        }
    }
    
    themeToggle.addEventListener('click', toggleTheme);
    
    // Mobile Menu Toggle
    navToggle.addEventListener('click', () => {
        navMenu.classList.toggle('active');
        navToggle.classList.toggle('active');
    });
    
    // Close mobile menu when clicking on a link
    document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', () => {
            navMenu.classList.remove('active');
            navToggle.classList.remove('active');
        });
    });
    
    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
        initTheme();
        
        // Calculate on page load with default values
        updateResults();
    });
    </script>
</body>
</html>
